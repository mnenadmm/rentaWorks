<div class="registration-container">
<div class="registracija-wrapper">
  <div class="progress-bar">
    <div class="progress-line"></div>
    <div class="steps">
      <div 
        class="step" 
        *ngFor="let s of steps; let i = index"
        [class.active]="currentStep === i + 1"
        [class.completed]="currentStep > i + 1"
      >
        {{ i + 1 }}
      </div>
    </div>
  </div>

  <div class="step-content">

    <!-- KORAK 1 -->
    <form *ngIf="currentStep === 1" [formGroup]="step1Form" (ngSubmit)="nextStep()">

      <label>
        Username:
        <input formControlName="username" />
      </label>
      <div *ngIf="step1Form.get('username')?.invalid && step1Form.get('username')?.touched" class="error">
        Username mora imati najmanje 4 karaktera.
      </div>

      <label>
        Ime:
        <input formControlName="ime" />
      </label>
      <div *ngIf="step1Form.get('ime')?.invalid && step1Form.get('ime')?.touched" class="error">
        Ime je obavezno.
      </div>

      <label>
        Prezime:
        <input formControlName="prezime" />
      </label>
      <div *ngIf="step1Form.get('prezime')?.invalid && step1Form.get('prezime')?.touched" class="error">
        Prezime je obavezno.
      </div>

      <label>
        Email:
        <input formControlName="email" type="email" />
      </label>
      <div *ngIf="step1Form.get('email')?.invalid && step1Form.get('email')?.touched" class="error">
        Email nije validan.
      </div>

      <label>
        Lozinka:
        <input formControlName="lozinka" type="password" />
      </label>
      <div *ngIf="step1Form.get('lozinka')?.invalid && step1Form.get('lozinka')?.touched" class="error">
        Lozinka mora imati najmanje 6 karaktera.
      </div>

      <div class="buttons">
        <button type="submit" [disabled]="step1Form.invalid">Dalje</button>
      </div>
    </form>

    <!-- KORACI 2 i 3: samo primer sadrÅ¾aja sa dugmetom nazad i dalje -->
    <div *ngIf="currentStep === 2">
      <p>Ovde ide forma za izbor tipa korisnika i dodatne podatke</p>
      <div class="buttons">
        <button (click)="prevStep()">Nazad</button>
        <button (click)="nextStep()">Dalje</button>
      </div>
    </div>

    <div *ngIf="currentStep === 3">
      <p>Ovde ide forma za dodatne profilne podatke</p>
      <div class="buttons">
        <button (click)="prevStep()">Nazad</button>
        <button (click)="nextStep()">Dalje</button>
      </div>
    </div>

    <!-- KORAK 4: pregled i submit -->
    <div *ngIf="currentStep === 4">
      <p>Ovde ide pregled i potvrda podataka</p>
      <div class="buttons">
        <button (click)="prevStep()">Nazad</button>
        <button (click)="submit()">Submit</button>
      </div>
    </div>

  </div>
  </div>
</div>
