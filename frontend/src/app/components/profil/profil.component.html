<div class="profil-container" *ngIf="user">
  <div class="profil-header">
    <img
      [src]="user.profilna_slika ? 'http://5.75.164.111:5001/static/uploads/' + user.profilna_slika : 'assets/default-avatar.png'"
      alt="Profilna slika"
      class="profilna-slika"
    />
    <h1>{{ user.ime }} {{ user.prezime }}</h1>
    <p class="username">&#64;{{ user.username }}</p>

    <!-- Upload polje odmah ispod slike i imena -->
    <div class="upload-slika">
      <h3>Dodaj fotografiju</h3>
      <input type="file" (change)="onFileSelected($event)" />
      <button (click)="uploadImage()" [disabled]="!selectedFile">Dodaj sliku</button>
    </div>
  </div>

 <div class="biografija">
  <p *ngIf="user.biografija">
    {{ user.biografija }}
  </p>
  
  <!-- Dugme za dodavanje/izmenu biografije, bez else dela -->
  <button class="btn btn-sm btn-outline-secondary mt-2" (click)="openBioEditor()">
    {{ user.biografija ? 'Izmeni biografiju' : 'Dodaj biografiju' }}
  </button>
</div>

  <div class="osnovni-podaci">
    <p>
      <strong>Email:</strong> {{ user.email }}
      <span *ngIf="user.verifikovan_email" class="verified">✔️ Verifikovan</span>
    </p>
    <p><strong>Telefon:</strong> {{ user.telefon }}</p>
    <p><strong>Adresa:</strong> {{ user.adresa }}</p>
    <p><strong>Grad:</strong> {{ user.grad }}</p>
    <p><strong>Država:</strong> {{ user.drzava }}</p>
    <p><strong>Tip korisnika:</strong> {{ user.tip_korisnika }}</p>
    <p><strong>Datum registracije:</strong> 
      {{ user.datum_registracije | date: 'dd.MM.yyyy. HH:mm' }}
    </p>
  </div>
</div>
